<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>neoux.js</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <link rel="stylesheet" href="css/neoux.css">
    <script src="js/neoux.js"></script>
</head>
<body>
<h1>neoux.js</h1>

<h2>アラート</h2>
<button id="nuAlert">Alert</button>
<button id="nuConfirm">Confirm</button>
<button id="nuSheet">Sheet</button>

<h2>ローディングインジケータ</h2>
<button id="nuLoading">Indicator</button>

<h2>トースト</h2>
<button id="nuToast">Toast</button>
<button id="nuToastDelay">Toast with delay</button>

<h2>ドロップダウンメニュー</h2>
<div style="display:flex; justify-content:space-between;">
    <button id="dropdownBtn">Menu</button>
    <button id="dropdownBtnLeft">Left side menu</button>
</div>

<h2>状態管理のテスト</h2>
<input type="text" name="filename" value="" />
<input type="hidden" name="siteCode" id="siteCode" value="ASN" />
<button onclick="document.getElementById('siteCode').value='KTN';">Change hidden value</button>
<p>hiddenだとchangeイベントは発生しない</p>

<h2>色々なinput</h2>
<div>
    <input type="text" class="nuInput" placeholder="お名前を入力してください" />
</div>
<div>
    <textarea class="nuTextarea" placeholder="ご意見・ご感想"></textarea>
</div>
<div>
    <select class="nuSelect">
        <option value="">選択してください</option>
        <option value="a">選択肢A</option>
        <option value="b">選択肢B</option>
    </select>
</div>
<div>
    <label>年/月/日：<input type="date"></label>
</div>
<div>
    <label>年 / 月 / 日 +時:分：<input type="datetime-local"></label>
</div>
<div>
    <label>カラーパレッド：<input type="color" value="#0b80dc"></label>
</div>

<div>
    <label>範囲を選択：<input type="range" min="0" max="100"></label>
</div>
<canvas id="stockGraph" width="150" height="150">
    現在の株価: $3.15 + 0.15
</canvas>

<script>
    document.addEventListener("DOMContentLoaded", () => {

        //------------------------------------------------------------------------------------
        // アラート用スタイル
        //------------------------------------------------------------------------------------
        document.getElementById("nuAlert").addEventListener("click", () => {
            neoux.alert("This is some message area.<br><b>HTML</b>で装飾できます。", function() {
                console.log("ok");
            });
        });
        document.getElementById("nuConfirm").addEventListener("click", () => {
            neoux.confirm("This is some message area.", function() {
                // ok
                console.log("ok");
            }, function(ans) {
                // cancel
                console.log("cancel");
            });
        });
        document.getElementById("nuSheet").addEventListener("click", () => {
            neoux.sheet("操作を選んでください", [
                { label: "編集", callback: () => console.log("編集") },
                { label: "削除", callback: () => console.log("削除") },
                { label: "複製", callback: () => console.log("複製") },
                { label: "キャンセル", callback: null }
            ]);
        });

        //------------------------------------------------------------------------------------
        // ローディングインジケータ用スタイル
        //------------------------------------------------------------------------------------
        document.getElementById("nuLoading").addEventListener("click", () => {
            neoux.loading.show("ダウンロード中です");

            // 3秒後に非表示
            setTimeout(() => {
                neoux.loading.hide();
            }, 3000);
        });

        //------------------------------------------------------------------------------------
        // トースト通知
        //------------------------------------------------------------------------------------
        document.getElementById("nuToast").addEventListener("click", () => {
            neoux.toast.show("保存が完了しました！");
        });

        document.getElementById("nuToastDelay").addEventListener("click", () => {
            neoux.toast.show("エラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しました", 5000); // 5秒表示
        });


        //------------------------------------------------------------------------------------
        // ドロップダウンメニュー
        //------------------------------------------------------------------------------------
        const btn = document.getElementById("dropdownBtn");
        neoux.dropdown.attach(btn, [
            { label: "設定", callback: () => console.log("設定") },
            { label: "ログアウト", callback: () => console.log("ログアウト") }
        ]);


        const btnLeft = document.getElementById("dropdownBtnLeft");
        neoux.dropdown.attach(btnLeft, [
            { label: "設定", callback: () => console.log("設定") },
            { label: "ログアウト", callback: () => console.log("ログアウト") }
        ]);

        //------------------------------------------------------------------------------------
        // 状態管理のテスト
        //------------------------------------------------------------------------------------
        const formState = {};
        document.querySelectorAll("input, select, textarea").forEach(el => {
            el.addEventListener("change", () => {
                document.querySelectorAll("input, select, textarea").forEach(input => {
                    if (input.name) {
                        formState[input.name] = input.value;
                        console.log(formState[input.name]);
                    }
                });
            });
        });
    });
</script>

</body>
</html>