<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>nu.js</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
	<link rel="stylesheet" href="src/neoux/css/utils.css">
	<link rel="stylesheet" href="src/neoux/css/neoux.css">
	<script src="src/neoux/js/nu.js"></script>
	<script src="lib/js/jquery-3.7.1.js"></script>
</head>
<body>
<div id="nuContents">
	<h1>ぬ - nu.js</h1>
	nu.jsはライブラリに依存しない Vanilla JS で作られているUI補助ツールです。jqueryとの共存も可能です。

	<form id="__nuForm">
		<!-- セクション: アラート -->
		<section>
			<h2 class="mt40">アラート</h2>
			<div id="__nuAlertSimple">
				<div class="flexRow gap10 mt30">
					<h3>nu.alert</h3>
					<button id="nuAlertSimpleBtn" class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>


			<div id="__nuAlert">
				<div class="flexRow gap10 mt30">
					<h3>nu.alert</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock" data-html-safe></pre>
			</div>


			<div id="__nuConfirm">
				<div class="flexRow gap10 mt30">
					<h3>nu.confirm</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>

			<div id="__nuSheetAlert">
				<div class="flexRow gap10 mt30">
					<h3>nu.sheet</h3>
					<button class="nuButton" type="button" data-html-safe>Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>


			<div id="__nuSheet">
				<div class="flexRow gap10 mt30">
					<h3>nu.sheet</h3>
					<button class="nuButton" type="button" data-html-safe>Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>

		<!-- セクション: ローディングインジケータ -->
		<section>
			<div id="__nuLoading">
				<h2 class="mt80">ローディングインジケータ</h2>
				<div class="flexRow gap10 mt30">
					<h3>nu.loading</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>


		<!-- セクション: トースト -->
		<section>
			<h2 class="mt80">トースト</h2>
			<div id="__nuToast">
				<div class="flexRow gap10 mt30">
					<h3>nu.toast</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>

			<div id="__nuToastDelay">
				<div class="flexRow gap10 mt30">
					<h3>nu.toast</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>


		<!-- セクション: ドロップダウンメニュー -->
		<section>
			<h2 class="mt80">ドロップダウンメニュー</h2>
			<div id="__nuDropdownTrigger">
				<div class="flexRow gap10 mt30">
					<h3>nu.dropdown</h3>
					<button id="__nuDropdownTriggerBtn" class="nuButton" type="button">Run</button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>

			<div id="__nuDropdownTriggerR">
				<div class="flexSpread gap10 mt30">
					<h3>nu.dropdown</h3>
					<button id="__nuDropdownTriggerRBtn" class="nuMenuButton" type="button"></button>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>

		<!-- セクション: 画像アップロード -->
		<section>
			<div id="__nuUpload">
				<h2 class="mt80">画像アップロード</h2>
<!--				TODO nuFlexColumn→ flexColumn-->
				<div class="flexColumn gap10 mt30">
					<h3>nu.upload</h3>
					<div id="uploadArea"></div>
				</div>
				<pre class="nuCodeBlock"></pre>

			</div>
		</section>

		<!-- セクション: セグメントボタン -->
		<section>
			<div id="__nuSegmentSort">
				<h2 class="mt80">セグメントボタン</h2>
				<div class="flexColumn gap10 mt30">
					<h3>nu.segment</h3>
					<div id="__nuSegmentSortBtns"></div>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>

			<div id="__nuSegmentFruits">
				<div class="flexColumn gap10 mt30">
					<h3>nu.segment</h3>
					<div id="__nuSegmentFruitsBtns"></div>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>

		<!-- セクション: 検索ボックス -->
		<section>
			<div id="__nuSearch">
				<h2 class="mt80">検索ボックス</h2>
				<div class="flexColumn gap10 mt30">
					<h3>nu.search</h3>
					<div id="__nuSearchBox"></div>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>

		<!-- セクション: 入力欄に対して文字数カウンターを追加する-->
		<section>
			<h2 class="mt80">入力欄に対して文字数カウンターを追加する</h2>
			<div id="__nuCountInput">
				<div class="flexColumn gap10 mt30">
					<h3>nu.count</h3>
					<input id="__nuCountInputTarget" name="name" type="text" class="nuInput" placeholder="お名前を入力してください" autocomplete="on" />
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>

			<div id="__nuCountTextarea">
				<div class="flexColumn gap10 mt30">
					<h3>nu.count</h3>
					<textarea id="__nuCountTextareaTarget" name="inquire" class="nuTextarea wFull" placeholder="ご意見・ご感想" rows="5">テキスト</textarea>
				</div>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>

		<!-- セクション: フォーム値取得-->
		<section>
			<h2 class="mt80">フォーム値取得</h2>
			<div id="__nuForms">
				<div class="flexRow gap10 mt30">
					<h3>nu.formData</h3>
					<button class="nuButton" type="button">Run</button>
				</div>
				<textarea id="nuSubmitRestArea" class="nuTextarea wFull" rows="12" readonly></textarea>
				<pre class="nuCodeBlock"></pre>
			</div>
		</section>


		<hr class="mt80">
		<!-- セクション: 色々なinput-->
		<section>
			<h2 class="mt40">色々なinput</h2>
			<div class="flexColumn gap20">
				<div>
					<select name="sampleSelect" class="nuSelect">
						<option value="">選択してください</option>
						<option value="a">選択肢A</option>
						<option value="b">選択肢B</option>
					</select>
				</div>
				<div>
					<label>年/月/日：<input name="sampleDate" type="date"></label>
				</div>
				<div>
					<label>年 / 月 / 日 +時:分：<input name="sampleDatetimeLocal" type="datetime-local"></label>
				</div>
				<div>
					<label>カラーパレッド：<input name="sampleColor" type="color" value="#0b80dc"></label>
				</div>
				<div>
					<label>範囲を選択：<input name="sampleRange" type="range" min="0" max="100"></label>
				</div>
			</div>
		</section>

	</form>
</div>


<script>



	document.addEventListener("DOMContentLoaded", () => {
		"use strict";

		nu.d.begin("🚀Welcome to nu.js !");
		nu.d.log("ログメッセージ");
		// nu.d.warn("警告メッセージ");
		// nu.d.error("エラーが発生しました");
		// nu.d.info("インフォメーション");
		nu.d.json("jojo.json", {
			"name": "空条承太郎",
			"stand": "ザ・ワールド"
		});

		nu.d.end();

		//------------------------------------------------------------------------------------
		// カスタムアラート もっともシンプル
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuAlertSimple button").click(function() {
	nu.alert("メッセージ");
});
            `.trim();

			$("#__nuAlertSimple pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}

		//------------------------------------------------------------------------------------
		// カスタムアラート　メッセージをHTMLで装飾
		//------------------------------------------------------------------------------------
		{
			const code = `
const message=\`
<b>HTML</b>で装飾できます。<br>
なんと<br>
画像表示も可能！<br>
↓<br>
<a href="https://araisun.com/" target="_blank">
	<img src="https://araisun.com/img/site-logo.jpg">
</a>
\`.trim();

$("#__nuAlert button").click(function() {
	nu.alert(message, function() {
		nu.toast("Clicked OK");
	});
});
            `.trim();

			$("#__nuAlert pre").html(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// カスタムアラート　二つのボタン --OKとキャンセル
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuConfirm button").click(function() {
	nu.confirm("カスタムアラート", function() {
		nu.toast("Clicked OK");
	}, function() {
		nu.toast("Clicked キャンセル");
	});
});
            `.trim();

			$("#__nuConfirm pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// カスタムアラート　二つのボタン --ボタンの名前を自由にカスタマイズ
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuSheetAlert button").click(function() {
	nu.sheet("削除しますがよろしいですか？",
		{cancel:"キャンセル",delete:"削除"},{
			onCancel: function() {
				nu.toast("Clicked キャンセル");
			},
			onDelete: function() {
				nu.toast("Clicked 削除", { type:"error"});
			}
	});
});
            `.trim();

			$("#__nuSheetAlert pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// カスタムアラート　３つ以上のボタン --シート表現
		//------------------------------------------------------------------------------------
		{
			const code = `
const items = {
  edit: "編集",
  duplicate: "複製",
  delete: "削除",
  cancel: "キャンセル"
};

$("#__nuSheet button").click(function() {
	nu.sheet("操作を選んでください", items, {
		onEdit: function() {
			nu.toast("clicked 編集")
		},
		onDuplicate: function() {
			nu.toast("clicked 複製")
		},
		onDelete: function() {
			nu.toast("clicked 削除");
		},
		onCancel: function() {
			nu.toast("clicked キャンセル");
		}
	});
});
            `.trim();

			$("#__nuSheet pre").text(code); // 表示用
			new Function(code)(); // 実行用

		}

		//------------------------------------------------------------------------------------
		// ローディングインジケータ
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuLoading button").click(function() {
	nu.loading.show("読み込み中...");

	// 3秒後に非表示
	setTimeout(() => {
		nu.loading.hide();
	}, 3000);
});
            `.trim();

			$("#__nuLoading pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// トースト通知　その1
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuToast button").click(function() {
	nu.toast("保存が完了しました！");
});
            `.trim();

			$("#__nuToast pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}

		//------------------------------------------------------------------------------------
		// トースト通知　その2
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuToastDelay button").click(function() {
	const longMessage = "エラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しましたエラーが発生しました";

	nu.toast(longMessage,
	{
		duration: 5000, // 5秒間表示
		type: "error",
		position: "top"
	});
});
            `.trim();

			$("#__nuToastDelay pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// ドロップダウンメニュー　その１
		//------------------------------------------------------------------------------------
		{
			// TODO $("#__nuDropdownTrigger button").click の形でメニューを表示できるようにしたい
			const code = `
nu.dropdown("__nuDropdownTriggerBtn", {
		success: "成功",
		error: "エラー",
		warning: "警告",
		info: "インフォ",
	}, {
	onSuccess: function () {
		nu.toast.s("Clicked 成功");
	},
	onError: function () {
		nu.toast.e("Clicked エラー");
	},
	onWarning: function () {
		nu.toast.w("Clicked 警告");
	},
	onInfo: function () {
		nu.toast.i("Clicked インフォ");
	}
});
            `.trim();

			$("#__nuDropdownTrigger pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}

		//------------------------------------------------------------------------------------
		// ドロップダウンメニュー　その2 --ハンバーガータイプ
		//------------------------------------------------------------------------------------
		{
			const code = `
nu.dropdown("__nuDropdownTriggerRBtn", {
		hoge: "ほげ",
		fuga: "ふが",
		pico: "ぴこ"
	}, {
	onHoge: function () {
		nu.toast("clicked ほげ");
	},
	onFuga: function () {
		nu.toast("clicked ふが");
	},
	onPico: function () {
		nu.toast("clicked ぴこ");
	}
});
            `.trim();

			$("#__nuDropdownTriggerR pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// 画像アップロードUI
		//------------------------------------------------------------------------------------
		{
			const code = `
nu.upload("uploadArea", {
	maxSize: 1024 * 1024, // 1MBまで
	url: "/api/upload/image"
}, {
	onError: function (msg) {
		nu.toast.e("エラー: " + msg);
	},
	onSuccess: function(msg) {
		nu.toast.s("登録完了: "+ msg);
	}
});
`.trim();

			$("#__nuUpload pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}

		//------------------------------------------------------------------------------------
		// セグメントボタン　その１
		//------------------------------------------------------------------------------------
		{
			const code = `
nu.segment("__nuSegmentSortBtns", {
	name: "sampleSortOption",
	value: "最新",
	options: [
		{ label: "最新", value: "最新" },
		{ label: "人気", value: "人気" },
		{ label: "古い順", value: "古い順" }
	]
}, {
	onChange: (val) => nu.toast(val)
});
            `.trim();


			$("#__nuSegmentSort pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// セグメントボタン　その２
		//------------------------------------------------------------------------------------
		{
			const code = `
nu.segment("__nuSegmentFruitsBtns", {
	name: "sampleFruitsOption",
	value: "メロン",
	options: [
		{ label: "りんご", value: "りんご" },
		{ label: "バナナ", value: "バナナ" },
		{ label: "メロン", value: "メロン" }
	]
}, {
	onChange: (val) => nu.toast(val)
});
            `.trim();

			$("#__nuSegmentFruits pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}



		//------------------------------------------------------------------------------------
		// 検索ボックス
		//------------------------------------------------------------------------------------
		{
			const code = `
nu.search("__nuSearchBox", "/sample/site_search_index.json", {
	onConfirm: function (text) {
		nu.toast("🔍検索確定: " + text, {position: "top"});
	},
	onBlur: function (text) {
		nu.toast("🔎フォーカスアウト: " + text, {position: "top"});
	}
});
`.trim();
			$("#__nuSearch pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}


		//------------------------------------------------------------------------------------
		// 入力欄に対して文字数カウンターを追加する　フィールド
		//------------------------------------------------------------------------------------
		{
			const code = `nu.count("__nuCountInputTarget", 30);`;
			$("#__nuCountInput pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}

		//------------------------------------------------------------------------------------
		// 入力欄に対して文字数カウンターを追加する　テキストエリア
		//------------------------------------------------------------------------------------
		{
			const code = `nu.count("__nuCountTextareaTarget", 140);`;
			$("#__nuCountTextarea pre").text(code); // 表示用
			new Function(code)(); // 実行用
		}



		//------------------------------------------------------------------------------------
		// Submit
		//------------------------------------------------------------------------------------
		{
			const code = `
$("#__nuForms button").click(function() {
	const res = nu.forms("__nuForm");
	const jstr = JSON.stringify(res, null , 2);
	$("#nuSubmitRestArea").text(jstr);
	nu.d.table("nu.formData", res);
});
            `.trim();

			$("#__nuForms pre").text(code); // 表示用
			new Function(code)(); // 実行用

		}


		//------------------------------------------------------------------------------------
		// 表示用補助ツール　HTMLコードをエスケープさせる
		//------------------------------------------------------------------------------------
		function escapeHtml(str) {
			return str
				.replace(/&/g, "&amp;")
				.replace(/</g, "&lt;")
				.replace(/>/g, "&gt;")
				.replace(/"/g, "&quot;")
				.replace(/'/g, "&#039;");
		}
		document.querySelectorAll('pre.nuCodeBlock[data-html-safe]').forEach(pre => {
			const raw = pre.innerHTML.trim();
			pre.innerHTML = escapeHtml(raw);
		});

	});
</script>

</body>
</html>